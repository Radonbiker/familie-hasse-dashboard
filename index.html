<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>Familie Hasse ‚Äì Essensplan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
:root {
  --wood-dark: #1a100b;
  --wood: #25170f;
  --wood-light: #3d2518;
  --accent: #e0a15b;
  --accent-soft: #f3c48a;
  --text: #f6e7d5;
  --text-soft: #c8a88a;
}

/* ---------- BASIS ---------- */

body {
  margin: 0;
  font-family: system-ui, -apple-system, sans-serif;
  background: radial-gradient(circle at top, var(--wood-light), var(--wood-dark));
  color: var(--text);
  overflow-x: hidden;
}

header {
  background: linear-gradient(135deg, #4d2e1c, #1d120c);
  color: var(--text);
  padding: 16px 20px;
  font-size: 1.5rem;
  font-weight: 600;
  display:flex;
  align-items:center;
  gap:12px;
  position:sticky;
  top:0;
  z-index:50;
  box-shadow:0 4px 20px rgba(0,0,0,0.4);
}

/* ---------- LAYOUT ---------- */

.container {
  display: grid;
  grid-template-columns: 0.95fr 1.4fr;
  gap: 14px;
  padding: 14px;
}

.panel {
  background: rgba(0,0,0,0.35);
  padding: 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 6px 18px rgba(0,0,0,0.4);
}

.panel h2 {
  margin: 0 0 8px;
  font-size: 1.1rem;
  color: var(--accent-soft);
}

small { color: var(--text-soft); }

/* ---------- LIEBLINGSBUBBLES ---------- */

.fav-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
  margin-bottom: 10px;
}

.fav-bubble {
  background: rgba(255,255,255,0.09);
  border-radius: 12px;
  padding: 8px 4px;
  text-align:center;
  font-size:0.78rem;
  cursor:grab;
  user-select:none;
  border:1px solid rgba(255,255,255,0.12);
}

.fav-bubble span {
  display:block;
  font-size:1.25rem;
  margin-bottom:3px;
}

.fav-bubble:active {
  transform:scale(0.95);
  opacity:0.85;
}

/* ---------- KATEGORIEN ---------- */

.category {
  background: rgba(0,0,0,0.22);
  border-radius: 10px;
  margin-bottom: 8px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.08);
}

.category-header {
  padding:8px 10px;
  font-size:1rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
  background:rgba(255,255,255,0.05);
}

.category-content {
  display:none;
  padding:8px;
}

.category-content.open { display:block; }

.cat-item {
  padding:6px 8px;
  border-radius:8px;
  font-size:0.9rem;
  background:rgba(255,255,255,0.06);
  cursor:grab;
  margin-bottom:5px;
  display:flex;
  align-items:center;
  gap:8px;
}

.cat-item span.emoji {
  font-size:1.2rem;
}

/* ---------- GERICHTSLISTE (SORTIERBAR) ---------- */

.meal-list {
  display:flex;
  flex-direction:column;
  gap:6px;
  max-height:350px;
  overflow-y:auto;
  padding-right:3px;
}

.meal-card {
  display:flex;
  align-items:center;
  background:rgba(255,255,255,0.08);
  padding:6px 10px;
  border-radius:10px;
  cursor:grab;
  user-select:none;
  border:1px solid rgba(255,255,255,0.08);
}

.meal-card span.emoji {
  font-size:1.2rem;
  margin-right:8px;
}

.meal-card span.name {
  flex:1;
}

.meal-card .delete {
  font-size:1.2rem;
  cursor:pointer;
  margin-left:10px;
  opacity:0.8;
}

.meal-card .delete:hover {
  opacity:1;
}

/* ---------- SLOTS ---------- */

.week-grid {
  display:grid;
  grid-template-columns:repeat(7, 1fr);
  gap:10px;
}

.day-col {
  background:rgba(255,255,255,0.05);
  padding:6px;
  border-radius:10px;
}

.slot {
  background:rgba(0,0,0,0.25);
  padding:6px;
  margin-top:6px;
  border-radius:8px;
  border:1px dashed rgba(255,255,255,0.15);
  min-height:60px;
}

.slot.drag-over {
  background:rgba(255,255,255,0.1);
  border-color:var(--accent-soft);
}

.slot-label {
  font-size:0.75rem;
  color:var(--text-soft);
}

.slot-content {
  margin-top:3px;
  font-size:0.9rem;
  font-weight:600;
}
</style>
</head>

<body>

<header>üçΩÔ∏è Familie Hasse ‚Äì Essensplan</header>

<div class="container">

<!-- ‚ñë‚ñë‚ñë‚ñë‚ñë LINKS: Essen-Auswahl ‚ñë‚ñë‚ñë‚ñë‚ñë -->

<div class="panel">

<h2>Lieblingsessen</h2>
<small>8 Favoriten ‚Äì drag, drop oder tippen</small>

<div id="fav-grid" class="fav-grid"></div>

<h2>Kategorien</h2>
<div id="categories"></div>

<h2>Alle Gerichte</h2>
<small>Sortierbar, erweiterbar, l√∂schbar</small>

<div id="meal-list" class="meal-list"></div>

<form id="meal-form" style="margin-top:10px;">
  <input id="meal-name" placeholder="Gericht" required style="width:100%;padding:8px;border-radius:8px;margin-bottom:6px;border:none;">
  <input id="meal-emoji" placeholder="Emoji (üçï)" style="width:100%;padding:8px;border-radius:8px;margin-bottom:6px;border:none;">
  <button style="width:100%;padding:8px;background:var(--accent);border:none;border-radius:8px;font-weight:600;">
    ‚ûï Gericht hinzuf√ºgen
  </button>
</form>

</div>

<!-- ‚ñë‚ñë‚ñë‚ñë‚ñë RECHTS: Wochenplan ‚ñë‚ñë‚ñë‚ñë‚ñë -->

<div class="panel">
<h2>Wochenplan</h2>

<div class="week-grid" id="week-grid"></div>

</div>

</div>

<script>
/* ========= BASISDATEN ========= */

let meals = [
  {id:"spagbol", name:"Spaghetti Bolognese", emoji:"üçù"},
  {id:"gulasch", name:"Gulasch", emoji:"üç≤"},
  {id:"rouladen", name:"Rouladen mit Kl√∂√üen", emoji:"ü•©"},
  {id:"pizza", name:"Pizza", emoji:"üçï"},
  {id:"klopse", name:"K√∂nigsberger Klopse", emoji:"üçñ"},
  {id:"schnipom", name:"Schnitzel mit Pommes", emoji:"üçü"},
  {id:"bowl", name:"Bowl", emoji:"ü•ó"},
  {id:"geschnetzeltes", name:"Geschnetzeltes", emoji:"üçõ"},
];

let favorites = ["spagbol","gulasch","rouladen","pizza","klopse","schnipom","bowl","geschnetzeltes"];

/* Kategorien */
const categories = {
  "üçù Nudeln": [
    {id:"boloreload", name:"Nudeln mit Tomatenso√üe", emoji:"üçù"},
    {id:"mac", name:"Mac & Cheese", emoji:"üßÄ"},
    {id:"ramsuppe", name:"Nudelsuppe", emoji:"üçú"}
  ],
  "ü•© Fleisch": [
    {id:"gyros", name:"Gyros", emoji:"ü•©"},
    {id:"frikadellen", name:"Frikadellen", emoji:"üçñ"}
  ],
  "ü•ó Leicht": [
    {id:"pfanne", name:"Gem√ºsepfanne", emoji:"ü•¶"}
  ],
  "üçï Schnell": [
    {id:"hotdog", name:"Hotdog", emoji:"üå≠"},
    {id:"sandwich", name:"Sandwich", emoji:"ü•™"},
    {id:"roesti", name:"Kartoffelr√∂sti", emoji:"ü•î"}
  ],
  "üç≤ Suppe": [
    {id:"kartoffelsuppe", name:"Kartoffelsuppe", emoji:"ü•£"},
    {id:"tomatensuppe", name:"Tomatensuppe", emoji:"üçÖ"}
  ]
};

/* ========= RENDER-FUNKTIONEN ========= */

function renderFavorites() {
  const el = document.getElementById("fav-grid");
  el.innerHTML = "";

  favorites.forEach(fid => {
    const m = meals.find(x => x.id === fid);
    if (!m) return;

    const div = document.createElement("div");
    div.className = "fav-bubble";
    div.innerHTML = `<span>${m.emoji}</span>${m.name}`;
    div.draggable = true;

    div.addEventListener("dragstart", e => {
      e.dataTransfer.setData("text/plain", m.id);
    });

    div.addEventListener("click", () => {
      activeTapMeal = m.id;
      alert(`${m.name} w√§hlen und Slot antippen.`);
    });

    el.appendChild(div);
  });
}

function renderCategories() {
  const el = document.getElementById("categories");
  el.innerHTML = "";

  Object.entries(categories).forEach(([cat, items]) => {
    const wrap = document.createElement("div");
    wrap.className = "category";

    const head = document.createElement("div");
    head.className = "category-header";
    head.innerHTML = `${cat} <span>‚ñº</span>`;

    const cont = document.createElement("div");
    cont.className = "category-content";

    items.forEach(m => {
      const item = document.createElement("div");
      item.className = "cat-item";
      item.draggable = true;
      item.innerHTML = `<span class="emoji">${m.emoji}</span>${m.name}`;
      item.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", m.id);
      });
      item.addEventListener("click", () => {
        activeTapMeal = m.id;
        alert(`${m.name} w√§hlen und Slot antippen.`);
      });
      cont.appendChild(item);
    });

    head.addEventListener("click", () => {
      cont.classList.toggle("open");
    });

    wrap.appendChild(head);
    wrap.appendChild(cont);
    el.appendChild(wrap);
  });
}

function renderMealList() {
  const el = document.getElementById("meal-list");
  el.innerHTML = "";

  meals.forEach(m => {
    const div = document.createElement("div");
    div.className = "meal-card";
    div.draggable = true;

    div.innerHTML = `
      <span class="emoji">${m.emoji}</span>
      <span class="name">${m.name}</span>
      <span class="delete">üóëÔ∏è</span>
    `;

    div.addEventListener("dragstart", e => {
      e.dataTransfer.setData("text/plain", m.id);
    });

    div.querySelector(".delete").addEventListener("click", () => {
      if (!confirm(`"${m.name}" l√∂schen?`)) return;
      meals = meals.filter(x => x.id !== m.id);
      favorites = favorites.filter(x => x !== m.id);
      renderAll();
    });

    el.appendChild(div);
  });
}

function renderWeek() {
  const el = document.getElementById("week-grid");
  el.innerHTML = "";

  const days = ["Mo","Di","Mi","Do","Fr","Sa","So"];

  for (let d=0; d<7; d++) {
    const col = document.createElement("div");
    col.className="day-col";
    col.innerHTML = `<div style="font-weight:600;margin-bottom:4px;">${days[d]}</div>`;

    ["Mittag","Abend"].forEach(slot => {
      const slotEl = document.createElement("div");
      slotEl.className="slot";
      slotEl.innerHTML = `
        <div class="slot-label">${slot}</div>
        <div class="slot-content"></div>
      `;

      slotEl.addEventListener("dragover", e => e.preventDefault());
      slotEl.addEventListener("drop", e => {
        const id = e.dataTransfer.getData("text/plain");
        slotEl.querySelector(".slot-content").innerText =
          meals.find(m => m.id===id)?.emoji + " " +
          meals.find(m => m.id===id)?.name;
      });

      slotEl.addEventListener("click", () => {
        if (activeTapMeal) {
          const m = meals.find(x=>x.id===activeTapMeal);
          slotEl.querySelector(".slot-content").innerText = m.emoji + " " + m.name;
          activeTapMeal = null;
        }
      });

      col.appendChild(slotEl);
    });

    el.appendChild(col);
  }
}

/* ========= GERICHTE HINZUF√úGEN ========= */

document.getElementById("meal-form").addEventListener("submit", e => {
  e.preventDefault();
  const name = document.getElementById("meal-name").value.trim();
  const emoji = document.getElementById("meal-emoji").value.trim() || "üçΩÔ∏è";

  const id = name.toLowerCase().replace(/[^a-z0-9]+/g,"-");

  meals.push({id,name,emoji});
  document.getElementById("meal-name").value="";
  document.getElementById("meal-emoji").value="";

  renderAll();
});

/* ========= TAP-DROP ========= */

let activeTapMeal = null;

/* ========= ALLES RENDERN ========= */

function renderAll() {
  renderFavorites();
  renderCategories();
  renderMealList();
  renderWeek();
}

renderAll();
</script>

</body>
</html>
